<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AUTO PREMIUM ‚Äî –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å</title>
    <!-- –®—Ä–∏—Ñ—Ç—ã -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400&display=swap" rel="stylesheet">
    <!-- –ò–∫–æ–Ω–∫–∏ Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç—ã (API) -->
    <script src="https://api-maps.yandex.ru/2.1/?apikey=–≤–∞—à-–∫–ª—é—á-—Å—é–¥–∞&lang=ru_RU" type="text/javascript"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background: #0b0e12;
            color: #fff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        .app-wrapper {
            width: 100%;
            max-width: 1600px;
            padding: 20px;
            margin: 0 auto;
        }

        /* –ü—Ä–µ–º–∏—É–º-—Å—Ç–∏–ª–∏ */
        .glass-card {
            background: rgba(20, 25, 35, 0.7);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 215, 0, 0.15);
            border-radius: 36px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            border-color: #ffd966;
            box-shadow: 0 25px 50px rgba(255, 215, 0, 0.15);
            transform: translateY(-2px);
        }

        /* –®–∞–ø–∫–∞ */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .weather-block {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .weather-widget {
            padding: 14px 28px;
            border-radius: 60px;
            font-size: 17px;
            font-weight: 500;
            cursor: pointer;
            transition: 0.3s;
        }

        .notifications {
            position: relative;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
        }

        .badge {
            position: absolute;
            top: 5px;
            right: 8px;
            background: #ff3b30;
            color: white;
            font-size: 12px;
            padding: 3px 7px;
            border-radius: 30px;
            font-weight: 700;
        }

        /* –ê–≤—Ç–æ–º–æ–±–∏–ª—å —Å–ª–µ–≤–∞ (–≤ —É–≥–ª—É) */
        .car-corner {
            background: linear-gradient(145deg, #1e2532, #151b24);
            padding: 18px 32px;
            border-radius: 60px;
            display: inline-flex;
            align-items: center;
            gap: 20px;
            border: 1px solid #ffd96640;
            margin-bottom: 25px;
            cursor: pointer;
            transition: 0.3s;
        }

        .car-corner:hover {
            border-color: #ffd966;
            background: #222a38;
        }

        .car-corner i {
            font-size: 32px;
            color: #ffd966;
        }

        .car-info h3 {
            font-size: 20px;
            font-weight: 700;
        }

        .car-info p {
            color: #aab5cc;
            font-size: 14px;
        }

        /* –ü–æ–∏—Å–∫ */
        .search-section {
            margin-bottom: 30px;
        }

        .search-wrapper {
            position: relative;
            max-width: 600px;
        }

        .search-input {
            width: 100%;
            padding: 20px 25px 20px 60px;
            background: rgba(25, 30, 40, 0.9);
            border: 1.5px solid rgba(255, 215, 0, 0.2);
            border-radius: 60px;
            font-size: 17px;
            color: #fff;
            outline: none;
        }

        .search-input:focus {
            border-color: #ffd966;
            box-shadow: 0 0 0 4px rgba(255, 215, 0, 0.2);
        }

        .search-icon {
            position: absolute;
            left: 25px;
            top: 50%;
            transform: translateY(-50%);
            color: #ffd966;
            font-size: 20px;
        }

        .dropdown {
            position: absolute;
            top: 75px;
            left: 0;
            right: 0;
            background: #1a212e;
            border: 1px solid #ffd966;
            border-radius: 30px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .dropdown-item {
            padding: 15px 25px;
            cursor: pointer;
            border-bottom: 1px solid #2a3240;
        }

        .dropdown-item:hover {
            background: #ffd96620;
            color: #ffd966;
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .nav-tabs {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .tab-btn {
            background: transparent;
            border: 1px solid #2f3848;
            color: #b0c0d0;
            padding: 14px 28px;
            border-radius: 40px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        .tab-btn.active {
            background: #ffd966;
            border-color: #ffd966;
            color: #0b0e12;
            font-weight: 700;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* –°–µ—Ç–∫–∞ –¥–ª—è –≥–ª–∞–≤–Ω–æ–π */
        .main-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ —Å–æ–≤–µ—Ç–æ–≤ */
        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .tip-card {
            padding: 25px;
            border-radius: 32px;
        }

        /* –ú–æ–π–∫–∏ */
        .wash-card {
            padding: 25px;
            margin-bottom: 20px;
        }

        .wash-photos {
            display: flex;
            gap: 15px;
            margin: 15px 0;
        }

        .wash-photo {
            width: 100px;
            height: 100px;
            border-radius: 20px;
            background: #1f2635;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffd966;
            font-size: 14px;
            text-align: center;
            border: 1px dashed #ffd96660;
            cursor: pointer;
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–ª—è –º–∞—Å–ª–∞ */
        .oil-progress {
            background: #1f2635;
            height: 16px;
            border-radius: 30px;
            margin: 20px 0;
            overflow: hidden;
        }

        .oil-fill {
            height: 100%;
            background: linear-gradient(90deg, #00c853, #ffd966, #ff3b30);
            border-radius: 30px;
            transition: width 0.5s;
        }

        /* –î–æ–∫—É–º–µ–Ω—Ç—ã */
        .docs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .doc-item {
            padding: 25px;
            border-radius: 32px;
        }

        .password-screen {
            max-width: 500px;
            margin: 50px auto;
            padding: 50px;
            text-align: center;
        }

        .password-input {
            width: 200px;
            padding: 20px;
            font-size: 28px;
            text-align: center;
            letter-spacing: 8px;
            background: #0f131c;
            border: 2px solid #ffd966;
            border-radius: 60px;
            color: white;
            margin: 20px auto;
        }

        .btn {
            background: #ffd966;
            color: #0b0e12;
            border: none;
            padding: 16px 36px;
            border-radius: 60px;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: 0.2s;
        }

        .btn:hover {
            background: #f0c85c;
            transform: scale(1.02);
        }

        .hidden {
            display: none !important;
        }

        /* –ö–∞—Ä—Ç–∞ */
        #map {
            width: 100%;
            height: 400px;
            border-radius: 36px;
            margin: 20px 0;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤ */
        @media (max-width: 768px) {
            .app-wrapper { padding: 10px; }
            .car-corner { width: 100%; justify-content: center; }
            .main-grid { grid-template-columns: 1fr; }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate {
            animation: slideUp 0.4s cubic-bezier(0.2, 0.9, 0.3, 1) forwards;
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #1e2532;
            border: 1px solid #ffd966;
            padding: 16px 28px;
            border-radius: 60px;
            color: white;
            box-shadow: 0 20px 40px black;
            transform: translateY(100px);
            opacity: 0;
            transition: 0.3s;
            z-index: 9999;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="app-wrapper">
        <!-- –®–ê–ü–ö–ê: –ø–æ–≥–æ–¥–∞ + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div class="header">
            <div class="weather-block">
                <div class="weather-widget glass-card" id="weatherWidget">
                    <i class="fas fa-cloud-sun" id="weatherIcon"></i>
                    <span id="weatherText">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–≥–æ–¥—ã...</span>
                </div>
                <div class="notifications glass-card" id="notifBell">
                    <i class="fas fa-bell"></i>
                    <span class="badge" id="notifBadge">5</span>
                </div>
            </div>
            <!-- –ê–í–¢–û–ú–û–ë–ò–õ–¨ –í –õ–ï–í–û–ú –£–ì–õ–£ -->
            <div class="car-corner glass-card" id="carCorner">
                <i class="fas fa-car"></i>
                <div class="car-info">
                    <h3 id="carModelDisplay">X5 M Competition</h3>
                    <p id="carMileageDisplay">124 800 –∫–º ¬∑ –±–µ–Ω–∑–∏–Ω</p>
                </div>
                <i class="fas fa-chevron-right" style="color: #ffd966; margin-left: auto;"></i>
            </div>
        </div>

        <!-- –ü–û–ò–°–ö -->
        <div class="search-section">
            <div class="search-wrapper">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="searchInput" class="search-input" placeholder="–ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç, —É—Å–ª—É–≥, –∑–∞–ø—á–∞—Å—Ç–µ–π...">
                <div class="dropdown glass-card" id="searchDropdown"></div>
            </div>
        </div>

        <!-- –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
        <div class="nav-tabs">
            <button class="tab-btn active" data-tab="main">üè† –ì–ª–∞–≤–Ω–∞—è</button>
            <button class="tab-btn" data-tab="tips">üí° –°–æ–≤–µ—Ç—ã</button>
            <button class="tab-btn" data-tab="washes">üßº –ú–æ–π–∫–∏</button>
            <button class="tab-btn" data-tab="trips">üó∫Ô∏è –ü–æ–µ–∑–¥–∫–∏</button>
            <button class="tab-btn" data-tab="finance">üí∞ –§–∏–Ω–∞–Ω—Å—ã</button>
            <button class="tab-btn" data-tab="docs">üìÅ –î–æ–∫—É–º–µ–Ω—Ç—ã</button>
        </div>

        <!-- –ö–û–ù–¢–ï–ù–¢ -->
        <div class="content">
            <!-- –ì–õ–ê–í–ù–ê–Ø -->
            <div class="tab-content active" id="tab-main">
                <div class="main-grid">
                    <!-- –ë–ª–æ–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª—è (–¥–µ—Ç–∞–ª–∏) -->
                    <div class="glass-card" style="padding: 30px;">
                        <h3 style="margin-bottom: 20px; color: #ffd966;">–ú–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å</h3>
                        <div style="display: grid; gap: 15px;">
                            <div><span style="color: #9aaec6;">–ú–æ–¥–µ–ª—å:</span> <span id="mainModel" class="editable">X5 M Competition</span></div>
                            <div><span style="color: #9aaec6;">–ü—Ä–æ–±–µ–≥:</span> <span id="mainMileage" class="editable">124800</span> –∫–º</div>
                            <div><span style="color: #9aaec6;">VIN:</span> <span id="mainVin" class="editable">WF0MXXGBWM8R12345</span></div>
                            <div><span style="color: #9aaec6;">–ì–æ—Å–Ω–æ–º–µ—Ä:</span> <span id="mainPlate" class="editable">A777AA777</span></div>
                        </div>
                    </div>

                    <!-- –£–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –∑–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞ -->
                    <div class="glass-card" style="padding: 30px;">
                        <h3 style="margin-bottom: 20px; color: #ffd966;">üõ¢Ô∏è –ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞</h3>
                        <div>–¢–µ–∫—É—â–∏–π –ø—Ä–æ–±–µ–≥: <span id="oilCurrentMileage">124800</span> –∫–º</div>
                        <div>–ü–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–º–µ–Ω–∞: <span id="lastOilChange">120000</span> –∫–º</div>
                        <div class="oil-progress">
                            <div class="oil-fill" id="oilProgressBar" style="width: 60%;"></div>
                        </div>
                        <div id="oilMessage" style="margin-top: 10px; font-weight: 600;">–û—Å—Ç–∞–ª–æ—Å—å 4800 –∫–º</div>
                        <button class="btn" id="updateOilBtn" style="margin-top: 20px; padding: 12px 20px;">‚úèÔ∏è –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–±–µ–≥</button>
                    </div>

                    <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–≤–µ—Ç—ã -->
                    <div class="glass-card" style="padding: 30px;">
                        <h3 style="margin-bottom: 20px; color: #ffd966;">üí° –ü–æ–ª–µ–∑–Ω—ã–π —Å–æ–≤–µ—Ç</h3>
                        <p style="font-size: 18px; line-height: 1.6;" id="dailyTip">–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–∞–≤–ª–µ–Ω–∏–µ –≤ —à–∏–Ω–∞—Ö —Ä–∞–∑ –≤ –º–µ—Å—è—Ü ‚Äî —ç—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç —Ç–æ–ø–ª–∏–≤–æ –∏ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç –∂–∏–∑–Ω—å —Ä–µ–∑–∏–Ω–µ.</p>
                    </div>

                    <!-- –ö—Ä–∞—Ç–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                    <div class="glass-card" style="padding: 30px;">
                        <h3 style="margin-bottom: 20px; color: #ffd966;">üìä –ë—ã—Å—Ç—Ä–æ</h3>
                        <div>–†–∞—Å—Ö–æ–¥—ã –∑–∞ –º–µ—Å—è—Ü: <span style="color: #ffd966; font-weight: 700;" id="monthlyTotal">0 ‚ÇΩ</span></div>
                        <div style="margin-top: 15px;">–ü–æ–µ–∑–¥–æ–∫: <span id="tripCount">2</span></div>
                        <div>–ú–æ–µ–∫: <span id="washCount">3</span></div>
                    </div>
                </div>
            </div>

            <!-- –°–û–í–ï–¢–´ -->
            <div class="tab-content" id="tab-tips">
                <h2 style="margin-bottom: 30px; font-size: 32px;">üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã</h2>
                <div class="tips-grid" id="tipsContainer">
                    <!-- JS –∑–∞–ø–æ–ª–Ω–∏—Ç -->
                </div>
            </div>

            <!-- –ú–û–ô–ö–ò -->
            <div class="tab-content" id="tab-washes">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                    <h2 style="font-size: 32px;">üßº –ò—Å—Ç–æ—Ä–∏—è –º–æ–µ–∫</h2>
                    <button class="btn" id="addWashBtn">+ –î–æ–±–∞–≤–∏—Ç—å –º–æ–π–∫—É</button>
                </div>
                <div id="washesList" class="main-grid"></div>
            </div>

            <!-- –ü–û–ï–ó–î–ö–ò + –Ø–ù–î–ï–ö–° –ö–ê–†–¢–´ -->
            <div class="tab-content" id="tab-trips">
                <h2 style="margin-bottom: 30px; font-size: 32px;">üó∫Ô∏è –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø–æ–µ–∑–¥–æ–∫</h2>
                <div class="glass-card" style="padding: 30px; margin-bottom: 30px;">
                    <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 25px;">
                        <input type="text" id="fromAddress" class="search-input" placeholder="–û—Ç–∫—É–¥–∞" style="flex: 2;">
                        <input type="text" id="toAddress" class="search-input" placeholder="–ö—É–¥–∞" style="flex: 2;">
                        <button class="btn" id="calcRouteBtn">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                    </div>
                    <div id="routeInfo" style="margin: 20px 0; font-size: 18px;"></div>
                    <div id="map"></div>
                    <button class="btn" id="saveTripBtn" style="margin-top: 20px;">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–µ–∑–¥–∫—É</button>
                </div>
                <h3>–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø–æ–µ–∑–¥–∫–∏</h3>
                <div id="tripsHistory" class="main-grid" style="margin-top: 20px;"></div>
            </div>

            <!-- –§–ò–ù–ê–ù–°–´ -->
            <div class="tab-content" id="tab-finance">
                <h2 style="margin-bottom: 30px; font-size: 32px;">üí∞ –§–∏–Ω–∞–Ω—Å—ã</h2>
                <div class="glass-card" style="padding: 30px;">
                    <canvas id="financeChart" style="height: 300px;"></canvas>
                    <div style="display: flex; gap: 20px; margin: 30px 0;">
                        <button class="btn" id="addExpenseBtn">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</button>
                        <select id="categoryFilter" style="background: #1f2635; color: white; border: 1px solid #ffd966; border-radius: 40px; padding: 0 20px;">
                            <option value="all">–í—Å–µ</option>
                            <option value="–¢–æ–ø–ª–∏–≤–æ">‚õΩ –¢–æ–ø–ª–∏–≤–æ</option>
                            <option value="–†–µ–º–æ–Ω—Ç">üîß –†–µ–º–æ–Ω—Ç</option>
                            <option value="–°—Ç—Ä–∞—Ö–æ–≤–∫–∞">üìÑ –°—Ç—Ä–∞—Ö–æ–≤–∫–∞</option>
                            <option value="–ú–æ–π–∫–∞">üßº –ú–æ–π–∫–∞</option>
                        </select>
                    </div>
                    <div id="expensesList"></div>
                </div>
            </div>

            <!-- –î–û–ö–£–ú–ï–ù–¢–´ -->
            <div class="tab-content" id="tab-docs">
                <div id="docsPasswordScreen" class="password-screen glass-card">
                    <i class="fas fa-lock" style="font-size: 60px; color: #ffd966;"></i>
                    <h3 style="margin: 20px 0;">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</h3>
                    <input type="password" id="docPassword" class="password-input" maxlength="6">
                    <button class="btn" id="unlockDocs">–û—Ç–∫—Ä—ã—Ç—å</button>
                    <p style="color: #8e9db3; margin-top: 20px;">–ü–∞—Ä–æ–ª—å: 4-6 —Ü–∏—Ñ—Ä</p>
                </div>
                <div id="docsContent" class="hidden">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 30px;">
                        <h2 style="font-size: 32px;">üìÅ –ú–æ–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h2>
                        <button class="btn" id="addDocBtn">+ –î–æ–±–∞–≤–∏—Ç—å</button>
                    </div>
                    <div class="docs-grid" id="docsList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- TOAST –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø -->
    <div id="toast" class="toast"></div>

    <!-- –ú–û–î–ê–õ–ö–ê –î–û–ë–ê–í–õ–ï–ù–ò–Ø –ú–û–ô–ö–ò -->
    <div id="washModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); align-items: center; justify-content: center; z-index: 10000;">
        <div class="glass-card" style="max-width: 600px; width: 90%; padding: 40px;">
            <h3 style="color: #ffd966; margin-bottom: 25px;">–ù–æ–≤–∞—è –º–æ–π–∫–∞</h3>
            <input type="date" id="washDate" class="search-input" style="margin-bottom: 15px;">
            <input type="text" id="washChem" class="search-input" placeholder="–•–∏–º–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, Koch Chemie)" style="margin-bottom: 15px;">
            <textarea id="washComment" class="search-input" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" rows="3" style="margin-bottom: 15px;"></textarea>
            <div style="display: flex; gap: 20px; margin-bottom: 25px;">
                <div class="wash-photo" id="addPhotoBefore"><i class="fas fa-camera"></i> –î–æ</div>
                <div class="wash-photo" id="addPhotoAfter"><i class="fas fa-camera"></i> –ü–æ—Å–ª–µ</div>
            </div>
            <div style="display: flex; gap: 15px;">
                <button class="btn" id="saveWashBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button class="btn" id="closeWashModal" style="background: #3a4050;">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ê –î–û–ë–ê–í–õ–ï–ù–ò–Ø –†–ê–°–•–û–î–ê -->
    <div id="expenseModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); align-items: center; justify-content: center; z-index: 10000;">
        <div class="glass-card" style="max-width: 500px; width: 90%; padding: 40px;">
            <h3 style="color: #ffd966; margin-bottom: 25px;">–ù–æ–≤—ã–π —Ä–∞—Å—Ö–æ–¥</h3>
            <select id="expCat" class="search-input" style="margin-bottom: 15px;">
                <option value="–¢–æ–ø–ª–∏–≤–æ">–¢–æ–ø–ª–∏–≤–æ</option>
                <option value="–†–µ–º–æ–Ω—Ç">–†–µ–º–æ–Ω—Ç</option>
                <option value="–°—Ç—Ä–∞—Ö–æ–≤–∫–∞">–°—Ç—Ä–∞—Ö–æ–≤–∫–∞</option>
                <option value="–ú–æ–π–∫–∞">–ú–æ–π–∫–∞</option>
            </select>
            <input type="number" id="expAmount" class="search-input" placeholder="–°—É–º–º–∞" style="margin-bottom: 15px;">
            <input type="date" id="expDate" class="search-input" style="margin-bottom: 25px;">
            <div style="display: flex; gap: 15px;">
                <button class="btn" id="saveExpenseBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button class="btn" id="closeExpModal" style="background: #3a4050;">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script>
        (function() {
            // ==================== –°–û–°–¢–û–Ø–ù–ò–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ====================
            const App = {
                car: {
                    model: 'X5 M Competition',
                    mileage: 124800,
                    vin: 'WF0MXXGBWM8R12345',
                    plate: 'A777AA777',
                    lastOilChange: 120000
                },
                tips: [
                    { id: 't1', title: '–î–∞–≤–ª–µ–Ω–∏–µ –≤ —à–∏–Ω–∞—Ö', text: '–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–∞–∑ –≤ –º–µ—Å—è—Ü. –ù–æ—Ä–º–∞: 2.2-2.5 –∞—Ç–º.' },
                    { id: 't2', title: '–ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞', text: '–ö–∞–∂–¥—ã–µ 7500 –∫–º –¥–ª—è –±–µ–Ω–∑–∏–Ω–æ–≤—ã—Ö –¥–≤–∏–≥–∞—Ç–µ–ª–µ–π.' },
                    { id: 't3', title: '–¢–æ—Ä–º–æ–∑–Ω–∞—è –∂–∏–¥–∫–æ—Å—Ç—å', text: '–ú–µ–Ω—è—Ç—å —Ä–∞–∑ –≤ 2 –≥–æ–¥–∞, –æ–Ω–∞ –≥–∏–≥—Ä–æ—Å–∫–æ–ø–∏—á–Ω–∞.' },
                    { id: 't4', title: '–†–µ–º–µ–Ω—å –ì–†–ú', text: '–ó–∞–º–µ–Ω–∞ –ø–æ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—É, –æ–±—ã—á–Ω–æ 60-90 —Ç—ã—Å. –∫–º.' },
                    { id: 't5', title: '–ê–Ω—Ç–∏—Ñ—Ä–∏–∑', text: '–ù–µ —Å–º–µ—à–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞, –º–µ–Ω—è—Ç—å —Ä–∞–∑ –≤ 3 –≥–æ–¥–∞.' },
                    { id: 't6', title: '–í–æ–∑–¥—É—à–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä', text: '–ß–∏—Å—Ç—ã–π —Ñ–∏–ª—å—Ç—Ä —ç–∫–æ–Ω–æ–º–∏—Ç –¥–æ 5% —Ç–æ–ø–ª–∏–≤–∞.' },
                    { id: 't7', title: '–°–≤–µ—á–∏ –∑–∞–∂–∏–≥–∞–Ω–∏—è', text: '–ò—Ä–∏–¥–∏–µ–≤—ã–µ —Ö–æ–¥—è—Ç –¥–æ 100 —Ç—ã—Å., –æ–±—ã—á–Ω—ã–µ ‚Äî 30 —Ç—ã—Å.' },
                ],
                washes: [
                    { id: 'w1', date: '2025-02-20', chem: 'Koch Chemie', comment: '–û—Ç–ª–∏—á–Ω–æ, –±–ª–µ—Å—Ç–∏—Ç', photos: [] },
                    { id: 'w2', date: '2025-02-10', chem: 'Sonax', comment: '–ó–∏–º–Ω—è—è –º–æ–π–∫–∞', photos: [] }
                ],
                trips: [
                    { id: 'tr1', from: '–î–æ–º', to: '–†–∞–±–æ—Ç–∞', distance: 15, time: 25 },
                    { id: 'tr2', from: '–†–∞–±–æ—Ç–∞', to: '–¢–¶', distance: 8, time: 15 }
                ],
                expenses: [
                    { id: 'e1', cat: '–¢–æ–ø–ª–∏–≤–æ', amount: 5000, date: '2025-02-20' },
                    { id: 'e2', cat: '–†–µ–º–æ–Ω—Ç', amount: 12500, date: '2025-02-15' },
                    { id: 'e3', cat: '–°—Ç—Ä–∞—Ö–æ–≤–∫–∞', amount: 35000, date: '2025-02-01' },
                ],
                documents: [
                    { id: 'd1', name: '–°–¢–°', expiry: '12.2025', issue: '12.2020' },
                    { id: 'd2', name: '–ü—Ä–∞–≤–∞', expiry: '06.2026', issue: '06.2021' },
                    { id: 'd3', name: '–û–°–ê–ì–û', expiry: '03.2025', issue: '03.2024' },
                ],
                notifications: 5,
                chart: null,
                map: null,
                route: null
            };

            // –ë–∞–∑–∞ —Ä–∞–±–æ—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞
            const WORKS = [
                "–ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞", "–ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞ –≤ –ê–ö–ü–ü", "–ó–∞–º–µ–Ω–∞ —Ç–æ—Ä–º–æ–∑–Ω—ã—Ö –∫–æ–ª–æ–¥–æ–∫",
                "–ó–∞–º–µ–Ω–∞ –¥–∏—Å–∫–æ–≤", "–ó–∞–º–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞", "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞", "–®–∏–Ω–æ–º–æ–Ω—Ç–∞–∂",
                "–†–∞–∑–≤–∞–ª-—Å—Ö–æ–∂–¥–µ–Ω–∏–µ", "–ê–Ω—Ç–∏–∫–æ—Ä", "–ü–æ–ª–∏—Ä–æ–≤–∫–∞", "–•–∏–º—á–∏—Å—Ç–∫–∞",
                "–ó–∞–º–µ–Ω–∞ —Ä–µ–º–Ω—è –ì–†–ú", "–ó–∞–º–µ–Ω–∞ —Å–≤–µ—á–µ–π", "–ó–∞–º–µ–Ω–∞ –∞–Ω—Ç–∏—Ñ—Ä–∏–∑–∞"
            ];

            // ==================== –ó–ê–ì–†–£–ó–ö–ê/–°–û–•–†–ê–ù–ï–ù–ò–ï ====================
            function loadState() {
                try {
                    const saved = localStorage.getItem('autoPremium');
                    if (saved) Object.assign(App, JSON.parse(saved));
                } catch(e) {}
            }
            function saveState() {
                localStorage.setItem('autoPremium', JSON.stringify({
                    car: App.car, washes: App.washes, trips: App.trips,
                    expenses: App.expenses, documents: App.documents,
                    notifications: App.notifications
                }));
            }
            loadState();

            // ==================== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ====================
            function showToast(text, dur = 3000) {
                const t = document.getElementById('toast');
                t.textContent = text;
                t.classList.add('show');
                setTimeout(() => t.classList.remove('show'), dur);
            }

            // ==================== –ü–û–ì–û–î–ê ====================
            function updateWeather() {
                if (!navigator.geolocation) return;
                navigator.geolocation.getCurrentPosition(async pos => {
                    try {
                        const { latitude, longitude } = pos.coords;
                        const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true`);
                        const data = await res.json();
                        const temp = data.current_weather.temperature;
                        const code = data.current_weather.weathercode;
                        let icon = 'fa-cloud-sun';
                        if (code >= 51 && code <= 67) icon = 'fa-cloud-rain';
                        else if (code >= 71 && code <= 77) icon = 'fa-snowflake';
                        document.getElementById('weatherIcon').className = `fas ${icon}`;
                        document.getElementById('weatherText').innerHTML = `${temp}¬∞C ¬∑ –≤–µ—Ç–µ—Ä ${data.current_weather.windspeed} –∫–º/—á`;
                    } catch(e) {
                        document.getElementById('weatherText').textContent = '–ü–æ–≥–æ–¥–∞ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞';
                    }
                });
            }

            // ==================== –ê–í–¢–û–ú–û–ë–ò–õ–¨ (–õ–ï–í–´–ô –£–ì–û–õ) ====================
            function updateCarDisplay() {
                document.getElementById('carModelDisplay').textContent = App.car.model;
                document.getElementById('carMileageDisplay').textContent = `${App.car.mileage} –∫–º ¬∑ –±–µ–Ω–∑–∏–Ω`;
                document.getElementById('mainModel').textContent = App.car.model;
                document.getElementById('mainMileage').textContent = App.car.mileage;
                document.getElementById('mainVin').textContent = App.car.vin;
                document.getElementById('mainPlate').textContent = App.car.plate;
                document.getElementById('oilCurrentMileage').textContent = App.car.mileage;
                document.getElementById('lastOilChange').textContent = App.car.lastOilChange;
                updateOilProgress();
            }

            // –ú–∞—Å–ª–æ
            function updateOilProgress() {
                const diff = App.car.mileage - App.car.lastOilChange;
                const max = 7500;
                const percent = Math.min(100, (diff / max) * 100);
                document.getElementById('oilProgressBar').style.width = percent + '%';
                const left = Math.max(0, max - diff);
                document.getElementById('oilMessage').innerHTML = left > 0 ? `–û—Å—Ç–∞–ª–æ—Å—å ${left} –∫–º` : '‚ö†Ô∏è –°—Ä–æ—á–Ω–æ –∑–∞–º–µ–Ω–∏—Ç–µ –º–∞—Å–ª–æ!';
                if (left <= 0) showToast('‚ö†Ô∏è –ü–æ—Ä–∞ –º–µ–Ω—è—Ç—å –º–∞—Å–ª–æ!');
            }

            // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ
            document.querySelectorAll('.editable').forEach(el => {
                el.addEventListener('dblclick', function() {
                    const field = this.id.replace('main', '').toLowerCase();
                    const newVal = prompt('–ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:', this.textContent);
                    if (newVal) {
                        if (field === 'mileage') {
                            App.car.mileage = parseInt(newVal) || App.car.mileage;
                        } else if (field === 'model') App.car.model = newVal;
                        else if (field === 'vin') App.car.vin = newVal;
                        else if (field === 'plate') App.car.plate = newVal;
                        saveState();
                        updateCarDisplay();
                        showToast('–ê–≤—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ');
                    }
                });
            });

            document.getElementById('updateOilBtn').addEventListener('click', () => {
                const newMileage = prompt('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–±–µ–≥:', App.car.mileage);
                if (newMileage) {
                    App.car.mileage = parseInt(newMileage);
                    const last = prompt('–ü—Ä–æ–±–µ–≥ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞–º–µ–Ω–µ –º–∞—Å–ª–∞:', App.car.lastOilChange);
                    if (last) App.car.lastOilChange = parseInt(last);
                    saveState();
                    updateCarDisplay();
                    showToast('–î–∞–Ω–Ω—ã–µ –º–∞—Å–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã');
                }
            });

            // ==================== –°–û–í–ï–¢–´ ====================
            function renderTips() {
                const container = document.getElementById('tipsContainer');
                container.innerHTML = App.tips.map(t => `
                    <div class="tip-card glass-card">
                        <i class="fas fa-lightbulb" style="color: #ffd966; font-size: 32px; margin-bottom: 15px;"></i>
                        <h3 style="margin-bottom: 10px;">${t.title}</h3>
                        <p style="color: #b0c0d5;">${t.text}</p>
                    </div>
                `).join('');
                // —Å–ª—É—á–∞–π–Ω—ã–π —Å–æ–≤–µ—Ç –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
                const rand = App.tips[Math.floor(Math.random() * App.tips.length)];
                document.getElementById('dailyTip').textContent = rand.text;
            }

            // ==================== –ú–û–ô–ö–ò ====================
            function renderWashes() {
                const list = document.getElementById('washesList');
                list.innerHTML = App.washes.map(w => `
                    <div class="wash-card glass-card">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #ffd966; font-weight: 700;">${w.date}</span>
                            <i class="fas fa-trash" style="color: #888; cursor: pointer;" onclick="deleteWash('${w.id}')"></i>
                        </div>
                        <div style="margin: 15px 0;">üß™ ${w.chem || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</div>
                        <div style="color: #b0c0d5; margin-bottom: 15px;">${w.comment || ''}</div>
                        <div class="wash-photos">
                            ${w.photos && w.photos.length ? w.photos.map(p => `<div class="wash-photo"><img src="${p}" style="width:100%; height:100%; object-fit:cover; border-radius:20px;"></div>`).join('') : '<div class="wash-photo">–ù–µ—Ç —Ñ–æ—Ç–æ</div>'}
                        </div>
                    </div>
                `).join('');
                document.getElementById('washCount').textContent = App.washes.length;
            }

            window.deleteWash = (id) => {
                App.washes = App.washes.filter(w => w.id !== id);
                saveState();
                renderWashes();
                showToast('–ú–æ–π–∫–∞ —É–¥–∞–ª–µ–Ω–∞');
            };

            document.getElementById('addWashBtn').addEventListener('click', () => {
                document.getElementById('washModal').style.display = 'flex';
            });
            document.getElementById('closeWashModal').addEventListener('click', () => {
                document.getElementById('washModal').style.display = 'none';
            });
            document.getElementById('saveWashBtn').addEventListener('click', () => {
                const date = document.getElementById('washDate').value;
                const chem = document.getElementById('washChem').value;
                const comment = document.getElementById('washComment').value;
                if (!date) { alert('–£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É'); return; }
                App.washes.push({
                    id: Date.now().toString(),
                    date, chem, comment, photos: []
                });
                saveState();
                renderWashes();
                document.getElementById('washModal').style.display = 'none';
                document.getElementById('washDate').value = '';
                document.getElementById('washChem').value = '';
                document.getElementById('washComment').value = '';
                showToast('–ú–æ–π–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞');
            });

            // ==================== –ü–û–ï–ó–î–ö–ò + –Ø–ù–î–ï–ö–° –ö–ê–†–¢–´ ====================
            let currentRoute = null;
            function initMap() {
                if (!window.ymaps) return;
                ymaps.ready(() => {
                    App.map = new ymaps.Map('map', {
                        center: [55.76, 37.64],
                        zoom: 10
                    });
                });
            }

            document.getElementById('calcRouteBtn').addEventListener('click', async () => {
                const from = document.getElementById('fromAddress').value;
                const to = document.getElementById('toAddress').value;
                if (!from || !to) { alert('–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å–∞'); return; }
                try {
                    const res = await fetch(`https://api.routing.yandex.net/v2/route?apikey=–≤–∞—à-–∫–ª—é—á-—Å—é–¥–∞&waypoints=${encodeURIComponent(from)}|${encodeURIComponent(to)}&rll=~&results=1`);
                    const data = await res.json();
                    if (data.route && data.route[0]) {
                        const dist = Math.round(data.route[0].distance / 1000);
                        const time = Math.round(data.route[0].time / 60);
                        document.getElementById('routeInfo').innerHTML = `üöó –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: ${dist} –∫–º ¬∑ –í—Ä–µ–º—è: ~${time} –º–∏–Ω`;
                        currentRoute = { from, to, dist, time };
                        // –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ
                        if (App.map) {
                            // —Ç—É—Ç –∫–æ–¥ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞, –æ–ø—É—Å—Ç–∏–º –¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ç–∏
                        }
                    }
                } catch (e) {
                    showToast('–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–∞');
                }
            });

            document.getElementById('saveTripBtn').addEventListener('click', () => {
                if (!currentRoute) { alert('–°–Ω–∞—á–∞–ª–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –º–∞—Ä—à—Ä—É—Ç'); return; }
                App.trips.push({
                    id: Date.now().toString(),
                    ...currentRoute
                });
                saveState();
                renderTrips();
                showToast('–ü–æ–µ–∑–¥–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞');
            });

            function renderTrips() {
                const history = document.getElementById('tripsHistory');
                history.innerHTML = App.trips.map(t => `
                    <div class="glass-card" style="padding: 20px;">
                        <div><i class="fas fa-route" style="color:#ffd966;"></i> ${t.from} ‚Üí ${t.to}</div>
                        <div style="margin-top:10px;">${t.dist} –∫–º ¬∑ ${t.time} –º–∏–Ω</div>
                        <i class="fas fa-trash" style="color:#888; margin-top:10px; cursor:pointer;" onclick="deleteTrip('${t.id}')"></i>
                    </div>
                `).join('');
                document.getElementById('tripCount').textContent = App.trips.length;
            }
            window.deleteTrip = (id) => {
                App.trips = App.trips.filter(t => t.id !== id);
                saveState();
                renderTrips();
                showToast('–ü–æ–µ–∑–¥–∫–∞ —É–¥–∞–ª–µ–Ω–∞');
            };

            // ==================== –§–ò–ù–ê–ù–°–´ ====================
            function renderFinance() {
                const catFilter = document.getElementById('categoryFilter').value;
                let filtered = App.expenses;
                if (catFilter !== 'all') filtered = filtered.filter(e => e.cat === catFilter);
                
                const list = document.getElementById('expensesList');
                list.innerHTML = filtered.map(e => `
                    <div style="display:flex; justify-content:space-between; padding:15px; border-bottom:1px solid #2a3240;">
                        <span>${e.cat}</span>
                        <span style="color:#ffd966;">${e.amount} ‚ÇΩ</span>
                        <span style="color:#8e9db3;">${e.date}</span>
                    </div>
                `).join('');

                const total = filtered.reduce((s, e) => s + e.amount, 0);
                document.getElementById('monthlyTotal').textContent = total.toLocaleString() + ' ‚ÇΩ';

                // –ì—Ä–∞—Ñ–∏–∫
                const ctx = document.getElementById('financeChart').getContext('2d');
                if (App.chart) App.chart.destroy();
                const cats = [...new Set(filtered.map(e => e.cat))];
                const amounts = cats.map(c => filtered.filter(e => e.cat === c).reduce((s, e) => s + e.amount, 0));
                App.chart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: cats,
                        datasets: [{
                            data: amounts,
                            backgroundColor: ['#ffd966', '#f5b342', '#e68a2e', '#d9701e'],
                            borderWidth: 0
                        }]
                    }
                });
            }

            document.getElementById('addExpenseBtn').addEventListener('click', () => {
                document.getElementById('expenseModal').style.display = 'flex';
            });
            document.getElementById('closeExpModal').addEventListener('click', () => {
                document.getElementById('expenseModal').style.display = 'none';
            });
            document.getElementById('saveExpenseBtn').addEventListener('click', () => {
                const cat = document.getElementById('expCat').value;
                const amount = parseFloat(document.getElementById('expAmount').value);
                const date = document.getElementById('expDate').value;
                if (!amount || !date) return;
                App.expenses.push({ id: Date.now().toString(), cat, amount, date });
                saveState();
                renderFinance();
                document.getElementById('expenseModal').style.display = 'none';
                document.getElementById('expAmount').value = '';
                showToast('–†–∞—Å—Ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω');
            });
            document.getElementById('categoryFilter').addEventListener('change', renderFinance);

            // ==================== –î–û–ö–£–ú–ï–ù–¢–´ ====================
            function renderDocs() {
                const list = document.getElementById('docsList');
                list.innerHTML = App.documents.map(d => `
                    <div class="doc-item glass-card">
                        <div style="font-size:20px; font-weight:700; margin-bottom:15px;">${d.name}</div>
                        <div>üìÖ –¥–æ: ${d.expiry}</div>
                        <div>üìÜ –≤—ã–¥–∞–Ω: ${d.issue}</div>
                        <div style="margin-top:15px;">
                            <i class="fas fa-edit" style="color:#ffd966; margin-right:20px; cursor:pointer;" onclick="editDoc('${d.id}')"></i>
                            <i class="fas fa-trash" style="color:#888; cursor:pointer;" onclick="deleteDoc('${d.id}')"></i>
                        </div>
                    </div>
                `).join('');
            }

            window.editDoc = (id) => {
                const doc = App.documents.find(d => d.id === id);
                if (!doc) return;
                const newName = prompt('–ù–∞–∑–≤–∞–Ω–∏–µ:', doc.name);
                if (newName) doc.name = newName;
                const newExp = prompt('–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è:', doc.expiry);
                if (newExp) doc.expiry = newExp;
                const newIssue = prompt('–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏:', doc.issue);
                if (newIssue) doc.issue = newIssue;
                saveState();
                renderDocs();
                showToast('–î–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—ë–Ω');
            };
            window.deleteDoc = (id) => {
                if (confirm('–£–¥–∞–ª–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç?')) {
                    App.documents = App.documents.filter(d => d.id !== id);
                    saveState();
                    renderDocs();
                    showToast('–î–æ–∫—É–º–µ–Ω—Ç —É–¥–∞–ª—ë–Ω');
                }
            };

            document.getElementById('unlockDocs').addEventListener('click', () => {
                const pwd = document.getElementById('docPassword').value;
                if (/^\d{4,6}$/.test(pwd)) {
                    document.getElementById('docsPasswordScreen').classList.add('hidden');
                    document.getElementById('docsContent').classList.remove('hidden');
                    renderDocs();
                } else {
                    alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å (4-6 —Ü–∏—Ñ—Ä)');
                }
            });

            document.getElementById('addDocBtn').addEventListener('click', () => {
                const name = prompt('–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:');
                if (!name) return;
                const expiry = prompt('–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä 12.2025):');
                if (!expiry) return;
                const issue = prompt('–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏:');
                if (!issue) return;
                App.documents.push({ id: Date.now().toString(), name, expiry, issue });
                saveState();
                renderDocs();
                showToast('–î–æ–∫—É–º–µ–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω');
            });

            // ==================== –ü–û–ò–°–ö ====================
            function initSearch() {
                const input = document.getElementById('searchInput');
                const dd = document.getElementById('searchDropdown');
                input.addEventListener('input', () => {
                    const q = input.value.trim();
                    if (q.length === 0) { dd.style.display = 'none'; return; }
                    const filtered = WORKS.filter(w => w.toLowerCase().startsWith(q.toLowerCase()));
                    dd.innerHTML = filtered.map(w => `<div class="dropdown-item">${w}</div>`).join('');
                    dd.style.display = 'block';
                });
                document.addEventListener('click', (e) => {
                    if (!input.contains(e.target) && !dd.contains(e.target)) dd.style.display = 'none';
                });
                dd.addEventListener('click', (e) => {
                    const item = e.target.closest('.dropdown-item');
                    if (item) {
                        input.value = item.innerText;
                        dd.style.display = 'none';
                        showToast(`–í—ã–±—Ä–∞–Ω–æ: ${item.innerText}`);
                    }
                });
            }

            // ==================== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ====================
            document.getElementById('notifBadge').textContent = App.notifications;
            document.getElementById('notifBell').addEventListener('click', () => {
                showToast(`–£ –≤–∞—Å ${App.notifications} —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π`);
            });

            // ==================== –í–ö–õ–ê–î–ö–ò ====================
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    document.getElementById(`tab-${btn.dataset.tab}`).classList.add('active');
                });
            });

            // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
            updateWeather();
            updateCarDisplay();
            renderTips();
            renderWashes();
            renderTrips();
            renderFinance();
            initSearch();
            initMap();
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏
            document.getElementById('washCount').textContent = App.washes.length;
            document.getElementById('tripCount').textContent = App.trips.length;
        })();
    </script>
</body>
</html>